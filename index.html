<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8th Grade ELA Standards Tutor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }
        #background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            transition: opacity 0.5s ease-in-out;
            opacity: 0;
        }
        #background-container.visible {
            opacity: 1;
        }
        .bg-element {
            position: absolute;
            font-size: 50px;
            color: rgba(100, 116, 139, 0.1);
            animation: drift 40s linear infinite;
        }
        @keyframes drift {
            0% { transform: translateY(110vh) rotate(0deg); }
            100% { transform: translateY(-10vh) rotate(360deg); }
        }

        .standard-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .standard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .tutor-chat-bubble {
            background-color: #e2e8f0;
            border-radius: 20px 20px 20px 5px;
            position: relative;
        }
        .user-chat-bubble {
            background-color: #4f46e5;
            color: white;
            border-radius: 20px 20px 5px 20px;
        }
        .chat-container {
            height: calc(100vh - 300px);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div id="background-container"></div>

    <div id="app" class="relative z-10">
        <!-- Main Dashboard -->
        <div id="dashboard" class="container mx-auto p-4 md:p-8">
            <header class="text-center mb-10">
                <h1 class="text-4xl font-bold text-gray-900">8th Grade ELA Standards Tutor</h1>
                <p class="mt-2 text-lg text-gray-600">Your personal guide to mastering English Language Arts!</p>
            </header>
            <div id="standards-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Standard cards will be injected here by JavaScript -->
            </div>
        </div>

        <!-- Tutor Module -->
        <div id="tutor-module" class="hidden">
            <header class="bg-white/80 backdrop-blur-sm shadow-sm p-4 flex items-center sticky top-0 z-20">
                <button id="back-to-dashboard" class="p-2 rounded-full hover:bg-gray-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                </button>
                <h2 id="module-title" class="text-2xl font-bold text-gray-900 ml-4"></h2>
            </header>
            <main class="container mx-auto p-4 md:p-8">
                <div id="tutor-view" class="bg-white/80 backdrop-blur-sm p-6 rounded-lg shadow-lg">
                    <div id="chat-container" class="overflow-y-auto mb-4 p-4 bg-gray-100/80 rounded-lg chat-container">
                        <!-- Chat messages will appear here -->
                    </div>
                    <div id="interaction-area">
                        <!-- User interaction elements (buttons, text input) will go here -->
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
    const dashboardTheme = {
        name: 'dashboard',
        symbols: ['‚úèÔ∏è', 'üéì', 'üí°', 'üìö', 'üß†', '‚úçÔ∏è']
    };

    const standardsData = [
        {
            id: 1,
            title: "Listening and Speaking",
            description: "Listen and speak effectively in a variety of situations.",
            theme: { name: 'communication', symbols: ['üí¨', 'üé§', 'üó£Ô∏è', 'üéß', 'ü§ù'] },
            content: [
                { type: 'tutor', message: "Alright, let's tune in! Welcome to Standard 1: Listening and Speaking. Time to learn how to not just hear, but *really* listen... and how to talk so people actually want to listen back. üòâ" },
                { type: 'tutor', message: "First up: **active listening**. This isn't just about being quiet while someone else talks. It's about being a detective for their words!" },
                { type: 'tutor', message: "Imagine your friend is telling you a super dramatic story. How do you show you're a good active listener?" },
                { type: 'mcq', question: "What's the best way to show you're actively listening?", options: ["Planning what you're going to have for dinner.", "Nodding along while secretly checking your phone under the table.", "Asking a question like, 'Whoa, so you felt frustrated when that happened?'", "Interrupting to tell them about something similar that happened to you."], answer: 2, feedback: "Bingo! Asking clarifying questions is the secret handshake of a great listener. It shows you're actually processing what they're saying." },
                { type: 'tutor', message: "Fantastic! Now, for speaking. When you give a presentation, you need solid **evidence** to back up your points. Otherwise, it's just, like, your opinion, man." },
                { type: 'tutor', message: "You're trying to convince your parents to get a dog. What's the most powerful piece of evidence you could use?"},
                { type: 'mcq', question: "Which argument is most likely to win you a puppy?", options: ["'But he's so fluffy I'm gonna die!'", "A report I found says dog owners are scientifically proven to be less stressed.", "My friend has a dog and it's awesome.", "There are dogs all over TV, so they must be cool."], answer: 1, feedback: "You got it! Citing a study or facts gives you way more credibility than just saying 'but I want one!'. Though fluffiness is a strong point." },
                { type: 'tutor', message: "And that's a wrap on Listening and Speaking! You're basically a communication wizard now." }
            ]
        },
        {
            id: 2,
            title: "Reading and Writing Process",
            description: "Use a variety of recursive reading and writing processes.",
            theme: { name: 'library', symbols: ['üìö', 'üìù', '‚úíÔ∏è', 'üìñ', 'üìú'] },
            content: [
                { type: 'tutor', message: "Welcome to the workshop! This is Standard 2: The Reading and Writing Process. Think of it less like a straight line and more like a messy, creative cycle." },
                { type: 'tutor', message: "A common mix-up is **Revising vs. Editing**. **Revising** is like a movie director, looking at the big picture: Does the story make sense? Are the characters interesting? **Editing** is like the spell-check police, hunting for typos and grammar mistakes." },
                { type: 'mcq', question: "Which of these tasks would a 'Revising Director' do?", options: ["Spotting that you wrote 'your' instead of 'you're'.", "Deciding a whole paragraph needs to move to the beginning.", "Fixing a comma splice.", "Adding a period at the end of a sentence."], answer: 1, feedback: "Exactly! Moving a whole paragraph is a big-picture, structural change. That's a classic revision. The other options are detail-oriented editing tasks." },
                { type: 'tutor', message: "Perfect! Now for a key reading skill: **paraphrasing**. It's just a fancy word for saying the same thing but with your own flavor." },
                { type: 'tutor', message: "Let's try one. Read this sentence: 'The ancient mariner, with his long grey beard and glittering eye, held the wedding guest spellbound.'" },
                { type: 'paraphrase', original: "The ancient mariner, with his long grey beard and glittering eye, held the wedding guest spellbound.", example: "My version: 'The spooky old sailor with the crazy eyes totally mesmerized the wedding guest.' Your turn!" },
                { type: 'tutor', message: "Great job! The goal is always same meaning, different words. You've mastered the Reading and Writing Process. Go forth and create!" }
            ]
        },
        {
            id: 3,
            title: "Critical Reading and Writing",
            description: "Apply critical thinking skills to reading and writing.",
            theme: { name: 'detective', symbols: ['üîé', 'ü§î', 'üí°', '‚ùì', 'üïµÔ∏è'] },
            content: [
                { type: 'tutor', message: "Put on your detective hat! It's time for Standard 3: Critical Reading and Writing. We're going to look for clues in the text." },
                { type: 'tutor', message: "Our first case: **Situational Irony**. This is when something happens that's the total opposite of what you'd expect. It's the universe's little prank." },
                { type: 'mcq', question: "Which of these situations is the most ironic?", options: ["A pilot having a crippling fear of heights.", "A dog chasing a squirrel.", "A student passing a test they studied for.", "A comedy movie being funny."], answer: 0, feedback: "You've cracked the case! A pilot who's afraid of heights is the perfect example of situational irony. It's the 'Wait, what?!' moment in a story." },
                { type: 'tutor', message: "Case closed! Now for your writing. To make a truly strong argument, you need to address the **counterclaim**‚Äîthe other side's point of view." },
                { type: 'tutor', message: "It's like a debate. Acknowledging the other side doesn't make you look weak; it makes you look smart and prepared. It shows you've thought about everything." },
                { type: 'mcq', question: "Why should you bring up the counterclaim in your essay?", options: ["To fill up space and meet the word count.", "To admit that you're probably wrong.", "To show you've considered other views, which actually makes your own argument stronger.", "To give your opponent ideas on how to beat you."], answer: 2, feedback: "Precisely! It's like a chess master thinking three moves ahead. By addressing the counterclaim, you control the conversation and strengthen your own position." },
                { type: 'tutor', message: "Your critical thinking skills are razor sharp! Keep questioning everything you read and write." }

            ]
        },
        { id: 4, title: "Vocabulary", description: "Expand and apply spoken and reading vocabularies.", theme: { name: 'word-storm', symbols: ['A', 'b', 'C', 'd', 'E'] } },
        { id: 5, title: "Language", description: "Apply knowledge of grammar, usage, mechanics, and style.", theme: { name: 'blueprint', symbols: ['¬∂', '¬ß', '!', ';', ':'] } },
        { id: 6, title: "Research", description: "Engage in inquiry to acquire, refine, and communicate information.", theme: { name: 'connections', symbols: ['üîó', 'üåê', '‚Üí', 'üìä', 'üìà'] } },
        { id: 7, title: "Multimodal Literacies", description: "Comprehend and communicate through various content forms.", theme: { name: 'media', symbols: ['üñºÔ∏è', 'üéµ', 'üéûÔ∏è', 'üïπÔ∏è', 'üì±'] } },
        { id: 8, title: "Independent Reading and Writing", description: "Read and write independently for a variety of purposes.", theme: { name: 'galaxy', symbols: ['‚≠ê', '‚ú®', 'üöÄ', 'ü™ê', 'üå†'] } }
    ];

    const app = document.getElementById('app');
    const dashboard = document.getElementById('dashboard');
    const tutorModule = document.getElementById('tutor-module');
    const standardsGrid = document.getElementById('standards-grid');
    const moduleTitle = document.getElementById('module-title');
    const backToDashboard = document.getElementById('back-to-dashboard');
    const chatContainer = document.getElementById('chat-container');
    const interactionArea = document.getElementById('interaction-area');
    const backgroundContainer = document.getElementById('background-container');

    let currentStandard = null;
    let currentStep = 0;
    let progress = {};

    function init() {
        loadProgress();
        renderDashboard();
        updateBackground(dashboardTheme);
        backToDashboard.addEventListener('click', showDashboard);
    }

    function loadProgress() {
        const savedProgress = localStorage.getItem('elaTutorProgress');
        if (savedProgress) {
            progress = JSON.parse(savedProgress);
        } else {
            standardsData.forEach(std => progress[std.id] = 0);
        }
    }

    function saveProgress() {
        localStorage.setItem('elaTutorProgress', JSON.stringify(progress));
    }

    function updateBackground(theme) {
        backgroundContainer.innerHTML = '';
        if (!theme || !theme.symbols) {
            backgroundContainer.classList.remove('visible');
            return;
        }

        for (let i = 0; i < 20; i++) {
            const el = document.createElement('div');
            el.className = 'bg-element';
            el.textContent = theme.symbols[Math.floor(Math.random() * theme.symbols.length)];
            el.style.left = `${Math.random() * 100}vw`;
            el.style.animationDuration = `${15 + Math.random() * 30}s`;
            el.style.animationDelay = `${Math.random() * -45}s`;
            el.style.fontSize = `${20 + Math.random() * 40}px`;
            backgroundContainer.appendChild(el);
        }
        backgroundContainer.classList.add('visible');
    }

    function renderDashboard() {
        standardsGrid.innerHTML = '';
        standardsData.forEach(standard => {
            const isCompleted = progress[standard.id] === 100;
            const card = document.createElement('div');
            card.className = `standard-card bg-white p-6 rounded-lg shadow-md cursor-pointer flex flex-col justify-between ${isCompleted ? 'border-4 border-green-400' : ''}`;
            card.innerHTML = `
                <div>
                    <div class="flex items-center justify-between mb-2">
                         <h3 class="text-xl font-bold text-gray-900">${standard.title}</h3>
                         ${isCompleted ? `<div class="text-green-500 font-bold">‚úì</div>` : ''}
                    </div>
                    <p class="text-gray-600">${standard.description}</p>
                </div>
                <div class="mt-4">
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div class="bg-indigo-600 h-2.5 rounded-full" style="width: ${progress[standard.id] || 0}%"></div>
                    </div>
                </div>
            `;
            if (standard.content) {
                card.addEventListener('click', () => startModule(standard));
            } else {
                card.style.cursor = 'not-allowed';
                card.style.opacity = '0.5';
            }
            standardsGrid.appendChild(card);
        });
    }

    function startModule(standard) {
        currentStandard = standard;
        currentStep = 0;
        moduleTitle.textContent = standard.title;
        dashboard.classList.add('hidden');
        tutorModule.classList.remove('hidden');
        updateBackground(standard.theme);
        chatContainer.innerHTML = '';
        nextStep();
    }

    function showDashboard() {
        tutorModule.classList.add('hidden');
        dashboard.classList.remove('hidden');
        updateBackground(dashboardTheme);
        renderDashboard();
    }
    
    function nextStep() {
        const currentProgress = (currentStep / currentStandard.content.length) * 100;
        progress[currentStandard.id] = Math.floor(currentProgress);

        if (currentStep >= currentStandard.content.length) {
            progress[currentStandard.id] = 100;
            saveProgress();
            showCompletionMessage();
            return;
        }
        
        saveProgress();

        const stepData = currentStandard.content[currentStep];
        interactionArea.innerHTML = '';

        switch (stepData.type) {
            case 'tutor':
                addTutorMessage(stepData.message);
                currentStep++;
                setTimeout(nextStep, 1500); 
                break;
            case 'mcq':
                addTutorMessage(stepData.question);
                renderMCQ(stepData);
                break;
            case 'paraphrase':
                 renderParaphrase(stepData);
                 break;
        }
    }

    function addTutorMessage(message) {
        const bubble = document.createElement('div');
        bubble.className = 'tutor-chat-bubble p-4 max-w-lg mb-4 animate__animated animate__fadeInUp';
        bubble.innerHTML = `<p>${message}</p>`;
        chatContainer.appendChild(bubble);
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }
    
    function addUserMessage(message) {
        const bubble = document.createElement('div');
        bubble.className = 'user-chat-bubble p-4 max-w-lg mb-4 ml-auto animate__animated animate__fadeInUp';
        bubble.innerHTML = `<p>${message}</p>`;
        chatContainer.appendChild(bubble);
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }
    
    function renderMCQ(stepData) {
        const form = document.createElement('div');
        form.className = 'space-y-3';
        stepData.options.forEach((option, index) => {
            const button = document.createElement('button');
            button.className = 'w-full text-left p-3 bg-gray-200 rounded-lg hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-indigo-400';
            button.textContent = option;
            button.onclick = () => handleMCQAnswer(index, stepData);
            form.appendChild(button);
        });
        interactionArea.appendChild(form);
    }
    
    function handleMCQAnswer(selectedIndex, stepData) {
        addUserMessage(stepData.options[selectedIndex]);
        interactionArea.innerHTML = ''; 
        setTimeout(() => {
            addTutorMessage(stepData.feedback);
             if(selectedIndex === stepData.answer){
                currentStep++;
             }
             setTimeout(nextStep, 2500);
        }, 500);
    }
    
    function renderParaphrase(stepData) {
        const form = document.createElement('form');
        form.className = 'flex flex-col gap-2';
        form.innerHTML = `
            <textarea id="text-input" class="w-full p-2 border border-gray-300 rounded-lg" rows="3" placeholder="Rewrite it in your own words..."></textarea>
            <button type="submit" class="p-2 px-4 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-bold">Submit</button>
        `;
        form.onsubmit = (e) => {
            e.preventDefault();
            handleParaphraseAnswer(stepData);
        };
        interactionArea.appendChild(form);
        document.getElementById('text-input').focus();
    }

    function handleParaphraseAnswer(stepData) {
        const input = document.getElementById('text-input');
        const userAnswer = input.value.trim();
        if (userAnswer) {
            addUserMessage(userAnswer);
            interactionArea.innerHTML = '';
            
            setTimeout(() => {
                let feedback = `Nice one! Now, compare yours to my example: <br><br><i>"${stepData.example}"</i><br><br>As long as you captured the main idea in your own words, you did a great job!`;
                addTutorMessage(feedback);
                
                const continueButton = document.createElement('button');
                continueButton.textContent = 'Continue ‚Üí';
                continueButton.className = 'w-full mt-4 p-2 bg-green-600 text-white rounded-lg hover:bg-green-700';
                continueButton.onclick = () => {
                    currentStep++;
                    nextStep();
                };
                interactionArea.appendChild(continueButton);

            }, 500);
        }
    }
    
    function showCompletionMessage() {
        addTutorMessage(`üéâ Congratulations! You've completed the module for **${currentStandard.title}**! Keep up the great work. You can return to the dashboard to select another standard.`);
        interactionArea.innerHTML = `
            <button id="completion-back-btn" class="w-full p-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700">
                Back to Dashboard
            </button>
        `;
        document.getElementById('completion-back-btn').onclick = showDashboard;
    }

    init();
    </script>

</body>
</html>

